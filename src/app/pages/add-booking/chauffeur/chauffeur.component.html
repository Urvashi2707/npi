<div class="row">
  <div class="col-md-12 col-lg-12 col-sm-12">
    <nb-card class="nb-icons">
      <nb-card-header>
        Chauffeur
      </nb-card-header>
      <nb-card-body>

        <!-- Registration Number  -->
        <form ngNativeValidate #f="ngForm" (ngSubmit)="onSubmit(f)">
          <toaster-container [toasterconfig]="config"></toaster-container>
          <div class="row">
            <div class="col-md-5 col-sm-5 col-lg-5">
              <div class="form-group">
                <input type="text" id="num" name="num" style="text-transform: uppercase" class="form-control" required
                  [(ngModel)]="registrationNumber" #num="ngModel" maxlength="15" pattern="^[0-9a-zA-Z#,\-/_ .@]+$" onkeydown="javascript: return event.keyCode == 32 ? false : true">
                <label class="form-control-placeholder" for="num" id="num_label">Registration Number*</label>
              </div>
              <div class="form-control-feedback" *ngIf="num.errors && (num.dirty || num.touched)">
                <p *ngIf="num.errors.required" class="haserror">Registration Number is required</p>
                <p *ngIf="!num.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
              </div>
            </div>
            <div class="col-md-5 col-sm-5 col-lg-5">
              <div class="form-group">
                <select name="servicetype" id="servicetype" class="form-control" [(ngModel)]="serviceType" #servicetype="ngModel"
                  required (change)="getCityList()" [disabled]="disableNext">
                  <option *ngFor="let s of service_type" [value]="s.id"> {{s.type}}</option>
                </select>
                <label class="form-control-placeholder" for="servicetype" *ngIf="!disableNext">Service Type*</label>
              </div>
              <div class="col-md-6 col-lg-6 col-sm-6">
                <div class="form-control-feedback" *ngIf="servicetype.errors && (servicetype.dirty || servicetype.touched)"
                  style="display:inline-block">
                  <p *ngIf="servicetype.errors.required" class="haserror">Service Type is required</p>
                </div>
              </div>
            </div>
            <div class="col-md-2 col-sm-2 col-lg-2">
              <div>
                <button type="button" class="btn btn-warning" [disabled]="!registrationNumber || !serviceType || disableNext"
                  (click)='data()'>Next</button>
              </div>
            </div>
          </div>
          <div *ngIf="show">
            <div class="line">
              <span class="sectionHeader">Vehicle Details</span>
            </div>
            <div class="row" *ngIf="insuranceFlag">
              <div class="col-md-6 col-lg-6 col-sm-6">
                <div class="form-group">
                  <select name="brand" id="brand" class="form-control" (change)="onSelectBrand($event.target.value)"
                    [(ngModel)]="selectedBrand" #brand="ngModel" required>
                    <option *ngFor="let b of brands" [value]="b.brand_id"> {{b.brand_name}}</option>
                  </select>
                  <label class="form-control-placeholder" for="brand">Vehicle Brand*</label>
                </div>
              </div>
              <div class="col-md-6 col-lg-6 col-sm-6">
                <div class="form-control-feedback" *ngIf="brand.errors && (brand.dirty || brand.touched)">
                  <p *ngIf="brand.errors.required" class="haserror">Brand is required</p>
                </div>
              </div>
            </div>
            <div class="row" *ngIf="!dontShowModel">
              <div class="col-md-6 col-lg-6 col-sm-6">
                <div class="form-group">
                  <select name="model" id="model" class="form-control" (change)="onSelectModel($event.target.value)"
                    (ngModel)="selectedModel.id" #model="ngModel" required>
                    <option *ngFor="let ma of Models" [value]="ma.model_id"> {{ma.model_name}}</option>
                  </select>
                  <label class="form-control-placeholder" for="model">Vehicle Model*</label>
                </div>
              </div>
              <div class="col-md-6 col-lg-6 col-sm-6">
                <div class="form-control-feedback" *ngIf="model.errors && (model.dirty || model.touched)">
                  <p *ngIf="model.errors.required" class="haserror">Model is required</p>
                </div>
              </div>
            </div>
            <div class="row" *ngIf="!dontShowVariant">
              <div class="col-md-6 col-lg-6 col-sm-6">
                <div class="form-group">
                  <select name="variant" id="variant" class="form-control" (ngModel)="selectedVariant.id" #variant="ngModel"
                    required>
                    <option *ngFor="let va of Variant" [value]="va.variant_id"> {{va.variant_name}}</option>
                  </select>
                  <label class="form-control-placeholder" for="variant">Vehicle Variant*</label>
                </div>
              </div>
              <div class="col-md-6 col-lg-6 col-sm-6">
                <div class="form-control-feedback" *ngIf="variant.errors && (variant.dirty || variant.touched)">
                  <p *ngIf="variant.errors.required" class="haserror">Variant is required</p>
                </div>
              </div>
            </div>
            <!-- Coordinator Name -->
            <span class="sectionHeader" *ngIf="serviceType != '15'">Coordinator Details</span>
            <div class="row" *ngIf="serviceType != '15'">
              <div class="col-md-6 col-lg-6 col-sm-6 col-12">

                <div class="form-group CoordinatorName">
                  <select name="coordinator" id="coordinator" class="form-control" (change)="onCoordinator($event.target.value)"
                    (ngModel)="selectedCoordinator" #coordinator="ngModel" required>
                    <option *ngFor="let s of Coordinator" [value]="s.id"> {{s.first_name}}</option>
                  </select>
                  <label class="form-control-placeholder" for="coordinator">Coordinator Name*</label>
                </div>
                <div style="display:inline-block;margin:3%">
                  <button type="button" (click)="showModal(3)" class="addnumber" style="background-color: white;border-color: orange;margin-top: 1.2em;">
                    <i class="fa fa-plus" style="color:#ffa100" aria-hidden="true"></i>
                  </button>
                </div>
              </div>
              <div class="col-md-6 col-lg-6 col-sm-6" style="display:inline-block;">
                <div class="form-control-feedback" *ngIf="coordinator.errors && (coordinator.dirty || coordinator.touched)">
                  <p *ngIf="coordinator.errors.required" class="haserror">Coordinator Name is required</p>
                </div>
              </div>
            </div>
            <div class="row" *ngIf="serviceType != '15'">
              <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                <div class="form-group" style="display:inline-block;max-width: 16%;">
                  <label for="countrycode" style="font-size: 12px;padding-left: 2%;margin-bottom: 0px;margin-top: 1.0em;">Country
                    Code</label>
                  <input type="text" class="form-control" name="countrycode" OnlyNumber="true" [readonly]="true" value="+91"
                    [(ngModel)]="countrycode1" #countrycode="ngModel">

                </div>
                <div class="form-group CoordinatorMobile">
                  <label for="cormob" style="font-size: 12px;padding-left: 2%;margin-bottom: 0px;">Mobile Number*</label>
                  <input type="text" [readonly]="true" id="cormob" class="form-control" name="cormob" [(ngModel)]="selectedCoordinator.mobile_number"
                    #cormob="ngModel">

                </div>
              </div>
            </div>
            <!-- stock yard -->
            <div *ngIf="serviceType === '1'" style="padding-bottom: 2%;">
              <span class="sectionHeader" style="padding-bottom: 2%;">Location Details</span>
              <div class="row">
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="pickup-map">
                    <agm-map id="pickUpMap" [zoom]="zoom" [latitude]="latPickup" [longitude]="lngPickup" [disableDefaultUI]=false
                    (mapReady)=pickUpMapReady($event,1) (mapClick)="mapClk($event)" (centerChange)="centerChang($event)" 
                    (dragEnd)="mapDragEnd($event)">
                      <agm-marker [latitude]="latPickup" [longitude]="lngPickup" 
                      [iconUrl] = "iconurl"
                      [markerDraggable]=true 
                      (markerClick)="updateLocClk($events)" 
                      (dragEnd)="markerDragEndd($event,1)"
                      ></agm-marker>
                    </agm-map>
                  </div>
                </div>
              </div>
            <div class="row">
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control noPlaceholder" name="pickupsearch" id="pickupsearch" #pickupsearchplace autocomplete="off" spellcheck="off" required
                      type="text" (onSelect)="setAddress($event,'pickup')" google-place style="text-transform: capitalize;"/>
                    <label class="form-control-placeholder" for="city">Search Places*</label>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control" name="pickflatno" #pickflatno="ngModel" autocomplete="off" required spellcheck="off" type="text" [(ngModel)]="user.pickflatno" pattern="^[0-9a-zA-Z#,\-/_ .@]+$"  minlength="1" maxlength="10" style="text-transform: capitalize;"/>
                    <label class="form-control-placeholder" for="pickflatno">Flat No./House No.*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="pickflatno.errors && (pickflatno.dirty || pickflatno.touched)">
                      <p *ngIf="pickflatno.errors.required" class="haserror">Flat No./House No. is required</p>
                      <p *ngIf="!pickflatno.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="pickflatno.errors.minlength" class="haserror">Minimum 1 characters</p>
                    </div>
                </div>
              </div>
              <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                      <div class="form-group" >
                        <input class="form-control" name="pickupbuildingname" #pickupbuildingname="ngModel" autocomplete="off" required spellcheck="off" type="text" [(ngModel)]="user.pickupbuildingname" pattern="^[0-9a-zA-Z#,\-/_ .@]+$"  minlength="4" maxlength="100" />
                        <label class="form-control-placeholder" for="pickupbuildingname">Building name/Street name*</label>
                     </div>
                      <div class="form-control-feedback" *ngIf="pickupbuildingname.errors && (pickupbuildingname.dirty || pickupbuildingname.touched)">
                          <p *ngIf="pickupbuildingname.errors.required" class="haserror">Building name/Street name* is required</p>
                          <p *ngIf="!pickupbuildingname.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                          <p *ngIf="pickupbuildingname.errors.minlength" class="haserror">Minimum 4 characters</p>
                        </div>
                    </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control" name="pickupsearchplaceLandmark" id="pickulandmark" required  #pickupsearchplaceLandmark="ngModel"
                      autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.pickulandmark" pattern="^[0-9a-zA-Z#,\-/_ .@]+$" minlength="4" maxlength="100"/>
                    <label class="form-control-placeholder" for="pickulandmark">Landmark*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="pickupsearchplaceLandmark.errors && (pickupsearchplaceLandmark.dirty || pickupsearchplaceLandmark.touched)">
                      <p *ngIf="pickupsearchplaceLandmark.errors.required" class="haserror">Landmark is required</p>
                      <p *ngIf="!pickupsearchplaceLandmark.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="pickupsearchplaceLandmark.errors.minlength" class="haserror">Minimum 4 characters</p>
                    </div>
                </div>
              </div>
              <span class="sectionHeader">Slot Details</span>
              <div class="row" *ngIf="insuranceFlag">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <select name="city" id="city" class="form-control" [(ngModel)]="user.city" required #city="ngModel"
                      (change)="onCity($event)">
                      <option *ngFor="let d of cityList; let i = index" [value]="d.cityid">{{d.cityname}}</option>
                    </select>
                    <label class="form-control-placeholder" for="city">City*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="city.errors && (city.dirty || city.touched)">
                    <p *ngIf="city.errors.required" class="haserror">City is required</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <select id="svclist" class="form-control" name="svclist" [(ngModel)]="user.svc" #svclist="ngModel"
                      required>
                      <optgroup label="{{i.associated}}" *ngFor="let i of svcList;let j = index;">
                        <option [value]="i.id">{{i.name}}</option>
                      </optgroup>
                    </select>
                    <label class="form-control-placeholder" for="svclist">Service Centre List*</label>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom: 2%;">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <div class="input-group">
                      <input class="form-control" name="dp" [ngModel]="model" [readonly]="true" [minDate]="startDate"
                        (ngModelChange)="onSelectDate($event)" ngbDatepicker #d="ngbDatepicker" placeholder="{{valuedate | date: 'yyyy-MM-dd'}}">
                      <div class="input-group-append">
                        <button class="btn btn-outline-secondary dateButton" (click)="d.toggle()" type="button">
                          <span>
                            <i class="fa fa-calendar"></i>
                          </span>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="form-control-feedback" *ngIf="d.errors && (d.dirty || d.touched)">
                    <p *ngIf="d.errors.required" class="haserror">Date is required</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6">
                  <div class="form-group">
                    <input type="text" id="notes" class="form-control" name="notes" [(ngModel)]="user.notes" #notes="ngModel"
                    pattern="^[0-9a-zA-Z#,\-/_ .@]+$">
                    <label class="form-control-placeholder" for="notes">Notes</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="notes.errors && (notes.dirty || notes.touched)">
                    <p *ngIf="!notes.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom: 2%;">
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8" *ngIf="showtime">
                  <table cellspacing="20" *ngIf="show3">
                    <tr *ngFor="let row of buildArr(slot);let i = index">
                      <td *ngFor="let s of row" class="timeRow">
                        <a (click)=checkSlot(s.time_format,s.slothour) class="timeAnchor">{{s.time_format}}</a>
                      </td>
                    </tr>
                  </table>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" *ngIf="showtime">
                  <input class="form-control" name="slot" *ngIf="slot_time || showtime" [(ngModel)]="slothour" />
                </div>
              </div>
            </div>
            <!-- Internal Movement -->
            <div *ngIf="serviceType === '3'" style="padding-bottom: 2%;">
              <div style="padding-bottom: 2%;">
                <span class="sectionHeader" style="padding-bottom: 2%;">Location Details</span>
              </div>
             
              <div style="padding-bottom: 2%;">
                <span style="font-weight: 400;">Pickup Location</span>
              </div>
              <div class="row">
                <div  class="col-lg-6 col-sm-6 col-md-6">
                    <div class="pickup-map">
                        <agm-map id="pickUpMap" [zoom]="zoom" [latitude]="latPickup" [longitude]="lngPickup" [disableDefaultUI]=false
                        (mapReady)=pickUpMapReady($event,2) (mapClick)="mapClk($event)" (centerChange)="centerChang($event)" 
                          (dragEnd)="mapDragEnd($event)">
                          <agm-marker [latitude]="latPickup" [longitude]="lngPickup" 
                          [iconUrl] = "iconurl"
                          [markerDraggable]=true 
                          (markerClick)="updateLocClk($events)" 
                          (dragEnd)="markerDragEndd($event,2)"
                          ></agm-marker>
                        </agm-map>
                      </div>
                </div>
              </div>
              
              <div class="row">
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control noPlaceholder" id="internalpickup" #internalpickup autocomplete="off" spellcheck="off"
                      type="text" (onSelect)="setAddress($event,'pickup')" google-place required/>
                    <label class="form-control-placeholder" for="internalpickup">Search Places*</label>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control" #internalpickupflatno="ngModel" name="internalpickupflatno"  required [(ngModel)]="user.internalpickupflatno" autocomplete="off" spellcheck="off" type="text" pattern="^[0-9a-zA-Z#,\-/_ .@]+$" minlength="1" maxlength="10"/>
                    <label class="form-control-placeholder" for="internalpickupflatno">Flat No./House No.*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="internalpickupflatno.errors && (internalpickupflatno.dirty || internalpickupflatno.touched)">
                      <p *ngIf="internalpickupflatno.errors.required" class="haserror">Flat No./House No.* is required</p>
                      <p *ngIf="!internalpickupflatno.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="internalpickupflatno.errors.minlength" class="haserror">Minimum 1 characters</p>
                    </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-6 col-sm-6 col-md-6">
                    <div class="form-group">
                        <input class="form-control" id="internalpickupbilding"  #internalpickupbilding="ngModel" name="internalpickupbilding" required [(ngModel)]="user.internalpickupbilding"
                          autocomplete="off" spellcheck="off" type="text" pattern="^[0-9a-zA-Z#,\-/_ .@]+$" minlength="4" maxlength="100"/>
                        <label class="form-control-placeholder" for="internalpickupbilding">Building name/Street name*</label>
                      </div>
                      <div class="form-control-feedback" *ngIf="internalpickupbilding.errors && (internalpickupbilding.dirty || internalpickupbilding.touched)">
                          <p *ngIf="internalpickupbilding.errors.required" class="haserror">Building name/Street name* is required</p>
                          <p *ngIf="!internalpickupbilding.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                          <p *ngIf="internalpickupbilding.errors.minlength" class="haserror">Minimum 4 characters</p>
                        </div>
                </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control" id="internalpickulandmark"  #internalpickulandmark="ngModel" name="internalpickulandmark" required [(ngModel)]="user.internalpickulandmark"
                      autocomplete="off" spellcheck="off" type="text" pattern="^[0-9a-zA-Z#,\-/_ .@]+$" minlength="4" maxlength="100"/>
                    <label class="form-control-placeholder" for="internalpickulandmark">Landmark*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="internalpickulandmark.errors && (internalpickulandmark.dirty || internalpickulandmark.touched)">
                      <p *ngIf="internalpickulandmark.errors.required" class="haserror">Landmark is required</p>
                      <p *ngIf="!internalpickulandmark.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="internalpickulandmark.errors.minlength" class="haserror">Minimum 4 characters</p>
                    </div>
                </div>
              </div>
              <div style="padding-bottom: 2%;">
                <span style="font-weight: 400;">Drop off Location</span>
              </div>
              <div class="row" style="padding-bottom: 2%;">
                      <div class="col-lg-6 col-sm-6 col-md-6">
                          <div class="pickup-map">
                            <agm-map id="pickUpMap" [zoom]="zoom" [latitude]="latDrop" [longitude]="lngDrop" [disableDefaultUI]=false
                            (mapReady)=pickUpMapReady($event,3) (mapClick)="mapClk($event)" (centerChange)="centerChang($event)" 
                              (dragEnd)="mapDragEnd($event)">
                                <agm-marker [latitude]="latDrop" [longitude]="lngDrop" 
                                [iconUrl] = "iconurl"
                                [markerDraggable]=true 
                                (markerClick)="updateLocClk($events)" 
                                (dragEnd)="markerDragEndd($event,3)"
                                ></agm-marker>
                              </agm-map>
                            </div>
                      </div>
                    </div>
                  
             <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <input class="form-control noPlaceholder" ng-minlength="3" id="internaldropoff" #internaldropoff autocomplete="off" spellcheck="off" 
                        type="text" (onSelect)="setAddress($event,'dropoff')" google-place required/>
                      <label class="form-control-placeholder" for="internaldropoff">Search Places*</label>
                    </div>
                  </div>
                  <div class="col-lg-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <input class="form-control" #internaldropoffflatno="ngModel" name="internaldropoffflatno"  autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.internaldropoffflatno" required pattern="^[0-9a-zA-Z#,\-/_ .@]+$" minlength="1" maxlength="10"/>
                      <label class="form-control-placeholder" for="internaldropoffflatno">Flat No./House No.*</label>
                    </div>
                    <div class="form-control-feedback" *ngIf="internaldropoffflatno.errors && (internaldropoffflatno.dirty || internaldropoffflatno.touched)">
                        <p *ngIf="internaldropoffflatno.errors.required" class="haserror">Flat No./House No. is required</p>
                        <p *ngIf="!internaldropoffflatno.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                        <p *ngIf="internaldropoffflatno.errors.minlength" class="haserror">Minimum 1 characters</p>
                      </div>
                  </div>
                </div>
                <div class="row">
                    <div class="col-lg-6 col-sm-6 col-md-6">
                        <div class="form-group" >
                          <input class="form-control" #internaldropoffbuildingname="ngModel" name="internaldropoffbuildingname"  autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.internaldropoffbuildingname" required pattern="^[0-9a-zA-Z#,\-/_ .@]+$" minlength="4" maxlength="100"/>
                          <label class="form-control-placeholder" for="internaldropoffbuildingname">Building name/Street name*</label>
                        </div>
                        <div class="form-control-feedback" *ngIf="internaldropoffbuildingname.errors && (internaldropoffbuildingname.dirty || internaldropoffbuildingname.touched)">
                            <p *ngIf="internaldropoffbuildingname.errors.required" class="haserror">Building name/Street name is required</p>
                            <p *ngIf="!internaldropoffbuildingname.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                            <p *ngIf="internaldropoffbuildingname.errors.minlength" class="haserror">Minimum 4 characters</p>
                          </div>
                      </div>
                  <div class="col-lg-6 col-sm-6 col-md-6">
                    <div class="form-group">
                      <input class="form-control" id="internaldropofflandmark" name="internaldropofflandmark" #internaldropofflandmark="ngModel" [(ngModel)]="user.internaldropland"
                        autocomplete="off" spellcheck="off" type="text" required pattern="^[0-9a-zA-Z#,\-/_ .@]+$" minlength="4" maxlength="100"/>
                      <label class="form-control-placeholder" for="internaldropofflandmark">Landmark*</label>
                    </div>
                    <div class="form-control-feedback" *ngIf="internaldropofflandmark.errors && (internaldropofflandmark.dirty || internaldropofflandmark.touched)">
                        <p *ngIf="internaldropofflandmark.errors.required" class="haserror">Landmark is required</p>
                        <p *ngIf="!internaldropofflandmark.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                        <p *ngIf="internaldropofflandmark.errors.minlength" class="haserror">Minimum 4 characters</p>
                      </div>
                  </div>
                </div>
              <span class="sectionHeader">Slot Details</span>
              <div class="row" *ngIf="insuranceFlag">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <select name="city" id="city" class="form-control" [(ngModel)]="user.city" required #city="ngModel"
                      (change)="onCity($event)">
                      <option *ngFor="let d of cityList; let i = index" [value]="d.cityid">{{d.cityname}}</option>
                    </select>
                    <label class="form-control-placeholder" for="city">City*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="city.errors && (city.dirty || city.touched)">
                    <p *ngIf="city.errors.required" class="haserror">City is required</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <select id="svclist" class="form-control" name="svclist" [(ngModel)]="user.svc" #svclist="ngModel"
                      required>
                      <optgroup label="{{i.associated}}" *ngFor="let i of svcList;let j = index;">
                        <option [value]="i.id">{{i.name}}</option>
                      </optgroup>
                    </select>
                    <label class="form-control-placeholder" for="svclist">Service Centre List*</label>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom: 2%;">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <div class="input-group">
                      <input class="form-control" name="dp" [ngModel]="model" [readonly]="true" [minDate]="startDate"
                        (ngModelChange)="onSelectDate($event)" ngbDatepicker #d="ngbDatepicker" placeholder="{{valuedate | date: 'yyyy-MM-dd'}}"
                        pattern="^[a-zA-Z0-9 \,\.-]+$">
                      <div class="input-group-append">
                        <button class="btn btn-outline-secondary dateButton" (click)="d.toggle()" type="button">
                          <span>
                            <i class="fa fa-calendar"></i>
                          </span>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="form-control-feedback" *ngIf="d.errors && (d.dirty || d.touched)">
                    <p *ngIf="d.errors.required" class="haserror">Date is required</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6">
                  <div class="form-group">
                    <input type="text" id="notes" class="form-control" name="notes" [(ngModel)]="user.notes" #notes="ngModel"
                    pattern="^[0-9a-zA-Z#,\-/_ .@]+$">
                    <label class="form-control-placeholder" for="notes">Notes</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="notes.errors && (notes.dirty || notes.touched)">
                    <p *ngIf="!notes.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom: 2%;">
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8" *ngIf="showtime">
                  <table cellspacing="20" *ngIf="show3">
                    <tr *ngFor="let row of buildArr(slot);let i = index">
                      <td *ngFor="let s of row" class="timeRow">
                        <a (click)=checkSlot(s.time_format,s.slothour) class="timeAnchor">{{s.time_format}}</a>
                      </td>
                    </tr>
                  </table>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" *ngIf="showtime">
                  <input class="form-control" name="slot" *ngIf="slot_time || showtime" [(ngModel)]="slothour" />
                </div>
              </div>
            </div>
            <!-- Home delivery -->
            <div *ngIf="serviceType === '4'">
              <span class="sectionHeader">Customer Details</span>
              <div class="container1">
                <div class="row">
                  <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                    <div class="form-group" style="display:inline-block;max-width: 16%;">
                      <label for="countrycode" style="font-size: 12px;padding-left: 2%;margin-bottom: 0px;">Country
                        Code</label>
                      <input type="text" class="form-control" name="countrycode" OnlyNumber="true" [readonly]="true"
                        value="+91" [(ngModel)]="countrycode1" #countrycode="ngModel">
                    </div>
                    <div class="form-group" style="display:inline-block;min-width: 58%;">
                      <input type="text" class="form-control" name="mobile1" OnlyNumber="true" maxlength="10" (blur)="getinfowithMobile()"
                        [(ngModel)]="cust_details.mobile" required #mobile1="ngModel" pattern="^[0-9]{10}$">
                      <label class="form-control-placeholder" for="mobile1">Mobile Number*</label>
                    </div>
                    <div style="display:inline-block;margin:3%">
                      <button type="button" (click)="show1=!show1" class="addnumber">
                        <i class="fa" [ngClass]="{'fa-plus': !show1, 'fa-minus': show1}" style="color:#ffa100"
                          aria-hidden="true"></i>
                      </button>
                    </div>
                    <div class="form-control-feedback" *ngIf="mobile1.errors && (mobile1.dirty || mobile1.touched)">
                      <p *ngIf="mobile1.errors.required" class="haserror">mobile is required</p>
                      <p *ngIf="!mobile1.errors.valid" class="haserror">mobile must contain digits only</p>
                    </div>
                  </div>
                </div>
                <div *ngIf="show1">
                  <div class="row">
                    <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                      <div class="form-group" style="display:inline-block;max-width: 16%;">
                        <label for="countrycode" style="font-size: 12px;padding-left: 2%;margin-bottom: 0px;">Country
                          Code</label>
                        <input type="text" class="form-control" name="countrycode" OnlyNumber="true" [readonly]="true"
                          value="+91" [(ngModel)]="countrycode1" #countrycode="ngModel" pattern="^[0-9]{10}$">
                      </div>
                      <div class="form-group" style="display:inline-block;min-width: 58%;">
                        <input type="text" class="form-control" name="mobile2" OnlyNumber="true" maxlength="10"
                          [(ngModel)]="cust_details.mobile2" #mobile2="ngModel" pattern="^[0-9]{10}$">
                        <label class="form-control-placeholder" for="mobile2">Mobile Number*</label>
                      </div>
                      <div class="form-control-feedback" *ngIf="mobile2.errors && (mobile2.dirty || mobile2.touched)">
                        <p *ngIf="!mobile2.errors.valid" class="haserror">mobile must contain digits only</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                  <div class="form-group" style="display:inline-block;min-width:15%;">
                    <select id="salutation1" class="form-control" name="salutation1" [(ngModel)]="user.salutation"
                      #salutation1="ngModel" required>
                      <option *ngFor="let s of salutation" [value]="s.type"> {{s.type}}</option>
                    </select>
                  </div>
                  <div class="form-group CusName">
                    <input type="text" id="Cus_name" class="form-control" required [(ngModel)]="cust_details.first_name"
                      name="Cus_name" #Cus_name="ngModel" style="text-transform: capitalize;" pattern="^[ A-Za-z0-9_@./#&+-;%]*$">
                    <label class="form-control-placeholder" for="Cus_name">Customer Name*</label>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-control-feedback" *ngIf="Cus_name.errors && (Cus_name.dirty || Cus_name.touched)">
                    <p *ngIf="Cus_name.errors.required" class="haserror">Customer Name is required</p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <input type="text" id="email" class="form-control" name="email" [(ngModel)]="cust_details.email"
                      #email="ngModel" required pattern="^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$" style="text-transform: lowercase;">
                    <label class="form-control-placeholder" for="email">Email Id*</label>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-control-feedback" *ngIf="email.errors && (email.dirty || email.touched)">
                    <p *ngIf="email.errors.required" class="haserror">Email is required</p>
                    <p *ngIf="!email.errors.valid" class="haserror">Email must contain at least the @ character</p>
                  </div>
                </div>
              </div>
              <span class="sectionHeader" style="padding-bottom: 2%;">Location Details</span>
              <div class="row" style="padding-top: 2%;">
                <div class="col-lg-6 col-sm-6 col-md-6">
                    <div class="pickup-map">
                        <agm-map id="pickUpMap" [zoom]="zoom" [latitude]="latPickup" [longitude]="lngPickup" [disableDefaultUI]=false
                        [disableDefaultUI]=false
                        (mapReady)=pickUpMapReady($event,4) (mapClick)="mapClk($event)" (centerChange)="centerChang($event)" 
                          (dragEnd)="mapDragEnd($event)">
                          <agm-marker [latitude]="latPickup" [longitude]="lngPickup" 
                          [iconUrl] = "iconurl"
                          [markerDraggable]=true 
                          (markerClick)="updateLocClk($events)" 
                          (dragEnd)="markerDragEndd($event,4)"
                          ></agm-marker>
                        </agm-map>
                      </div>
                </div>
              </div>
             
              <div class="row">
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control noPlaceholder" id="homepickup" #homepickup autocomplete="off" spellcheck="off"
                      type="text" (onSelect)="setAddress($event,'pickup')" google-place required/>
                    <label class="form-control-placeholder" for="homepickup">Search Places*</label>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group" >
                    <input class="form-control" #homepickupflatno="ngModel" pattern="^[ A-Za-z0-9_@./#&+-;%]*$" name="homepickupflatno" required autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.homepickupflatno" minlength="1" maxlength="10"/>
                    <label class="form-control-placeholder" for="homepickupflatno">Flat No./House No.*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="homepickupflatno.errors && (homepickupflatno.dirty || homepickupflatno.touched)">
                      <p *ngIf="homepickupflatno.errors.required" class="haserror">Flat No./House No. is required</p>
                      <p *ngIf="!homepickupflatno.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="homepickupflatno.errors.minlength" class="haserror">Minimum 1 characters</p>
                    </div>
                </div>
              </div>
              <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                      <div class="form-group" >
                        <input class="form-control" #homepickupbuildingname="ngModel" pattern="^[ A-Za-z0-9_@./#&+-;%]*$" name="homepickupbuildingname" required autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.homepickupbuildingname" minlength="4" maxlength="100"/>
                        <label class="form-control-placeholder" for="homepickupbuildingname">Building name/Street name*</label>
                      </div>
                      <div class="form-control-feedback" *ngIf="homepickupbuildingname.errors && (homepickupbuildingname.dirty || homepickupbuildingname.touched)">
                          <p *ngIf="homepickupbuildingname.errors.required" class="haserror">Building name/Street name is required</p>
                          <p *ngIf="!homepickupbuildingname.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                          <p *ngIf="homepickupbuildingname.errors.minlength" class="haserror">Minimum 4 characters</p>
                        </div>
                    </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control" id="homepickulandmark" name="homepickulandmark"  #homepickulandmark="ngModel"
                      autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.landmarkhome" required pattern="^[0-9a-zA-Z#,\-/_ .@]+$"  minlength="4" maxlength="100"/>
                    <label class="form-control-placeholder" for="homepickulandmark">Landmark*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="homepickulandmark.errors && (homepickulandmark.dirty || homepickulandmark.touched)">
                      <p *ngIf="homepickulandmark.errors.required" class="haserror">Landmark is required</p>
                      <p *ngIf="!homepickulandmark.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="homepickulandmark.errors.minlength" class="haserror">Minimum 4 characters</p>
                    </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 col-lg-6 col-sm-6 col-12">
                  <div class="form-group salesExec">
                    <select name="salesExe" id="salesExe" class="form-control" style=" text-transform: uppercase" name="salesExe"
                      [(ngModel)]="user.service_type" #salesExe="ngModel" required>
                      <option *ngFor="let s of SaleExceutive" [value]="s.id">{{s.first_name}} - {{s.mobile_number}}</option>
                    </select>
                    <label class="form-control-placeholder" for="salesExe">Sales Executive*</label>
                  </div>
                  <div class="AddSalesBtn" style="display:inline-block;">
                    <button type="button" (click)="showModal(4)" class="addnumber" style="background-color: white;border-color: orange;">
                      <i class="fa fa-plus" style="color:#ffa100" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6 col-12">
                  <div class="form-group">
                    <input type="text" id="amount" class="form-control" name="amt" [(ngModel)]="user.amount" #amt="ngModel" pattern="^[0-9a-zA-Z#,\-/_ .@]+$">
                    <label class="form-control-placeholder" for="amount">Amount to be collected</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="amt.errors && (amt.dirty || amt.touched)">
                    <p *ngIf="!amt.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>

                  </div>
                </div>
              </div>
              <span class="sectionHeader">Slot Details</span>
              <div class="row" *ngIf="insuranceFlag">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <select name="city" id="city" class="form-control" [(ngModel)]="user.city" required #city="ngModel"
                      (change)="onCity($event)">
                      <option *ngFor="let d of cityList; let i = index" [value]="d.cityid">{{d.cityname}}</option>
                    </select>
                    <label class="form-control-placeholder" for="city">City*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="city.errors && (city.dirty || city.touched)">
                    <p *ngIf="city.errors.required" class="haserror">City is required</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <select id="svclist" class="form-control" name="svclist" [(ngModel)]="user.svc" #svclist="ngModel"
                      required>
                      <optgroup label="{{i.associated}}" *ngFor="let i of svcList;let j = index;">
                        <option [value]="i.id">{{i.name}}</option>
                      </optgroup>
                    </select>
                    <label class="form-control-placeholder" for="svclist">Service Centre List*</label>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom: 2%;">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <div class="input-group">
                      <input class="form-control" name="dp" [ngModel]="model" [readonly]="true" [minDate]="startDate"
                        (ngModelChange)="onSelectDate($event)" ngbDatepicker #d="ngbDatepicker" placeholder="{{valuedate | date: 'yyyy-MM-dd'}}">
                      <div class="input-group-append">
                        <button class="btn btn-outline-secondary dateButton" (click)="d.toggle()" type="button">
                          <span>
                            <i class="fa fa-calendar"></i>
                          </span>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="form-control-feedback" *ngIf="d.errors && (d.dirty || d.touched)">
                    <p *ngIf="d.errors.required" class="haserror">Date is required</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6">
                  <div class="form-group">
                    <input type="text" id="notes" class="form-control" name="notes" [(ngModel)]="user.notes" #notes="ngModel"
                    pattern="^[0-9a-zA-Z#,\-/_ .@]+$">
                    <label class="form-control-placeholder" for="notes">Notes</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="notes.errors && (notes.dirty || notes.touched)">
                    <p *ngIf="!notes.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom: 2%;">
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8" *ngIf="showtime">
                  <table cellspacing="20" *ngIf="show3">
                    <tr *ngFor="let row of buildArr(slot);let i = index">
                      <td *ngFor="let s of row" class="timeRow">
                        <a (click)=checkSlot(s.time_format,s.slothour) class="timeAnchor">{{s.time_format}}</a>
                      </td>
                    </tr>
                  </table>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" *ngIf="showtime">
                  <input class="form-control" name="slot" *ngIf="slot_time || showtime" [(ngModel)]="slothour" />
                </div>
              </div>
            </div>
            <!-- Test Drive -->
            <div *ngIf="serviceType === '2'">
              <span class="sectionHeader">Customer Details</span>
              <div class="container1">
                <div class="row">
                  <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                    <div class="form-group CountryCode">
                      <label for="countrycode" style="font-size: 12px;padding-left: 2%;margin-bottom: 0px;">Country
                        Code</label>
                      <input type="text" class="form-control" name="countrycode" OnlyNumber="true" [readonly]="true"
                        value="+91" [(ngModel)]="countrycode1" #countrycode="ngModel">
                    </div>
                    <div class="form-group MobileInput" style="display:inline-block;min-width: 58%;">
                      <input type="text" class="form-control" name="mobile1" OnlyNumber="true" (blur)="getinfowithMobile()"
                        maxlength="10" [(ngModel)]="cust_details.mobile" required #mobile1="ngModel" pattern="^[0-9]{10}$">
                      <label class="form-control-placeholder" for="mobile1">Mobile Number*</label>
                    </div>
                    <div class="AddMobNum" style="display:inline-block;margin:3%">
                      <button type="button" (click)="show1=!show1" class="addnumber">
                        <i class="fa" [ngClass]="{'fa-plus': !show1, 'fa-minus': show1}" style="color:#ffa100"
                          aria-hidden="true"></i>
                      </button>
                    </div>
                    <div class="form-control-feedback" *ngIf="mobile1.errors && (mobile1.dirty || mobile1.touched)">
                      <p *ngIf="mobile1.errors.required" class="haserror">mobile is required</p>
                      <p *ngIf="!mobile1.errors.valid" class="haserror">mobile must contain digits only</p>
                    </div>
                  </div>
                </div>
                <div *ngIf="show1">
                  <div class="row">
                    <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                      <div class="form-group" style="display:inline-block;max-width: 16%;">
                        <label for="countrycode" style="font-size: 12px;padding-left: 2%;margin-bottom: 0px;">Country
                          Code</label>
                        <input type="text" class="form-control" name="countrycode" OnlyNumber="true" [readonly]="true"
                          value="+91" [(ngModel)]="countrycode1" #countrycode="ngModel">
                      </div>
                      <div class="form-group" style="display:inline-block;min-width: 58%;">
                        <input type="text" class="form-control" name="mobile2" maxlength="10" [(ngModel)]="cust_details.mobile2"
                          #mobile2="ngModel" OnlyNumber="true" pattern="^[0-9]{10}$">
                        <label class="form-control-placeholder" for="mobile2">Mobile Number</label>
                      </div>
                      <div class="form-control-feedback" *ngIf="mobile2.errors && (mobile2.dirty || mobile2.touched)">
                        <p *ngIf="!mobile2.errors.valid" class="haserror">mobile must contain digits only</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                  <div class="form-group CusSalutation">
                    <select id="salutation1" class="form-control" name="salutation1" [(ngModel)]="user.salutation"
                      #salutation1="ngModel" required>
                      <option *ngFor="let s of salutation" [value]="s.type"> {{s.type}}</option>
                    </select>
                  </div>
                  <div class="form-group CusName">
                    <input type="text" id="Cus_name" class="form-control" required [(ngModel)]="cust_details.first_name"
                      name="Cus_name" #Cus_name="ngModel" style="text-transform: capitalize;" pattern="^[ A-Za-z0-9_@./#&+-;%]*$">
                    <label class="form-control-placeholder" for="Cus_name">Customer Name*</label>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-control-feedback" *ngIf="Cus_name.errors && (Cus_name.dirty || Cus_name.touched)">
                    <p *ngIf="Cus_name.errors.required" class="haserror">Customer Name is required</p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <input type="text" id="email" class="form-control" name="email" [(ngModel)]="cust_details.email"
                      #email="ngModel" required pattern="^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$" style="text-transform: lowercase;">
                    <label class="form-control-placeholder" for="email">Email Id*</label>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-control-feedback" *ngIf="email.errors && (email.dirty || email.touched)">
                    <p *ngIf="email.errors.required" class="haserror">Email is required</p>
                    <p *ngIf="!email.errors.valid" class="haserror">Email must contain at least the @ character</p>
                  </div>
                </div>
              </div>
              <span class="sectionHeader" style="padding-bottom: 2%;">Customer Location Details</span>
              <div class="row">
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="pickup-map">
                    <agm-map id="pickUpMap" [zoom]="zoom" [latitude]="latPickup" [longitude]="lngPickup" [disableDefaultUI]=false
                    [disableDefaultUI]=false
                    (mapReady)=pickUpMapReady($event,5) (mapClick)="mapClk($event)" (centerChange)="centerChang($event)" 
                      (dragEnd)="mapDragEnd($event)">
                      <agm-marker [latitude]="latPickup" [longitude]="lngPickup" 
                      [iconUrl] = "iconurl"
                      [markerDraggable]=true 
                      (markerClick)="updateLocClk($events)" 
                      (dragEnd)="markerDragEndd($event,5)"
                      ></agm-marker>
                    </agm-map>
                  </div>
                </div>
              </div>
            <div class="row">
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control noPlaceholder" id="testpickup" #testpickup autocomplete="off" spellcheck="off"
                      type="text" (onSelect)="setAddress($event,'pickup')" google-place required/>
                    <label class="form-control-placeholder" for="testpickup">Search Places*</label>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control" #testpickupflatno="ngModel" name="testpickupflatno"  required autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.testpickupflatno" pattern="^[0-9a-zA-Z#,\-/_ .@]+$"  minlength="1" maxlength="10"/>
                    <label class="form-control-placeholder" for="testpickupflatno" >Flat No./House No.*</label>
                  
                  </div>
                  <div class="form-control-feedback" *ngIf="testpickupflatno.errors && (testpickupflatno.dirty || testpickupflatno.touched)">
                      <p *ngIf="testpickupflatno.errors.required" class="haserror">Flat No./House No. is required</p>
                      <p *ngIf="!testpickupflatno.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="testpickupflatno.errors.minlength" class="haserror">Minimum 1 characters</p>
                    </div>
                </div>
              </div>
              <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                      <div class="form-group" >
                        <input class="form-control" #testpickupbuildingname="ngModel" name="testpickupbuildingname"  required autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.testpickupbuildingname" pattern="^[0-9a-zA-Z#,\-/_ .@]+$"  minlength="4" maxlength="100"/>
                        <label  class="form-control-placeholder" for="testpickupbuildingname" >Building name/Street name*</label>
                      
                      </div>
                      <div class="form-control-feedback" *ngIf="testpickupflatno.errors && (testpickupbuildingname.dirty || testpickupbuildingname.touched)">
                          <p *ngIf="testpickupbuildingname.errors.required" class="haserror">Building name/Street name is required</p>
                          <p *ngIf="!testpickupbuildingname.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                          <p *ngIf="testpickupbuildingname.errors.minlength" class="haserror">Minimum 4 characters</p>
                        </div>
                    </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control" id="testpickulandmark" name="testpickulandmark"  required #testpickulandmark="ngModel" [(ngModel)]="user.testpickulandmark" pattern="^[0-9a-zA-Z#,\-/_ .@]+$"
                      autocomplete="off" spellcheck="off" type="text" minlength="4" maxlength="100"/>
                    <label class="form-control-placeholder" for="testpickulandmark">Landmark*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="testpickulandmark.errors && (testpickulandmark.dirty || testpickulandmark.touched)">
                      <p *ngIf="testpickulandmark.errors.required" class="haserror">Landmark is required</p>
                      <p *ngIf="!testpickulandmark.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="testpickulandmark.errors.minlength" class="haserror">Minimum 4 characters</p>
                    </div>
                </div>
              </div>
             <div class="row">
                <div class="col-md-6 col-lg-6 col-sm-6 col-12">
                  <div class="form-group salesExec">
                    <select name="salesExe" id="salesExe" class="form-control" style=" text-transform: uppercase" name="salesExe"
                      [(ngModel)]="user.service_type" #salesExe="ngModel" required>
                      <option *ngFor="let s of SaleExceutive" [value]="s.id">{{s.first_name}} - {{s.mobile_number}}</option>
                    </select>
                    <label class="form-control-placeholder" for="salesExe">Sales Executive*</label>
                  </div>
                  <div class="salesExeBtn">
                    <button type="button" (click)="showModal(4)" class="addnumber" style="background-color: white;border-color: orange;">
                      <i class="fa fa-plus" style="color:#ffa100" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
              </div>
              <span class="sectionHeader">Slot Details</span>
              <div class="row" *ngIf="insuranceFlag">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <select name="city" id="city" class="form-control" [(ngModel)]="user.city" required #city="ngModel"
                      (change)="onCity($event)">
                      <option *ngFor="let d of cityList; let i = index" [value]="d.cityid">{{d.cityname}}</option>
                    </select>
                    <label class="form-control-placeholder" for="city">City*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="city.errors && (city.dirty || city.touched)">
                    <p *ngIf="city.errors.required" class="haserror">City is required</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <select id="svclist" class="form-control" name="svclist" [(ngModel)]="user.svc" #svclist="ngModel"
                      required>
                      <optgroup label="{{i.associated}}" *ngFor="let i of svcList;let j = index;">
                        <option [value]="i.id">{{i.name}}</option>
                      </optgroup>
                    </select>
                    <label class="form-control-placeholder" for="svclist">Service Centre List*</label>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom: 2%;">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <div class="input-group">
                      <input class="form-control" name="dp" [ngModel]="model" [readonly]="true" [minDate]="startDate"
                        (ngModelChange)="onSelectDate($event)" ngbDatepicker #d="ngbDatepicker" placeholder="{{valuedate | date: 'yyyy-MM-dd'}}">
                      <div class="input-group-append">
                        <button class="btn btn-outline-secondary dateButton" (click)="d.toggle()" type="button">
                          <span>
                            <i class="fa fa-calendar"></i>
                          </span>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="form-control-feedback" *ngIf="d.errors && (d.dirty || d.touched)">
                    <p *ngIf="d.errors.required" class="haserror">Date is required</p>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6">
                  <div class="form-group">
                    <input type="text" id="notes" class="form-control" name="notes" [(ngModel)]="user.notes" #notes="ngModel"
                    pattern="^[0-9a-zA-Z#,\-/_ .@]+$">
                    <label class="form-control-placeholder" for="notes">Notes</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="notes.errors && (notes.dirty || notes.touched)">
                    <p *ngIf="!notes.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-bottom: 2%;">
                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8" *ngIf="showtime">
                  <table cellspacing="20" *ngIf="show3">
                    <tr *ngFor="let row of buildArr(slot);let i = index">
                      <td *ngFor="let s of row" class="timeRow">
                        <a (click)=checkSlot(s.time_format,s.slothour) class="timeAnchor">{{s.time_format}}</a>
                      </td>
                    </tr>
                  </table>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" *ngIf="showtime">
                  <input class="form-control" name="slot" *ngIf="slot_time || showtime" [(ngModel)]="slothour" />
                </div>
              </div>
            </div>
            <div *ngIf="serviceType === '15'">
              <span class="sectionHeader">Customer Details</span>
              <div class="container1">
                <div class="row">
                  <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                    <div class="form-group" style="display:inline-block;max-width: 16%;">
                      <label for="countrycode" style="font-size: 12px;padding-left: 2%;margin-bottom: 0px;">Country
                        Code</label>
                      <input type="text" class="form-control" name="countrycode" OnlyNumber="true" [readonly]="true"
                        value="+91" [(ngModel)]="countrycode1" #countrycode="ngModel">

                    </div>
                    <div class="form-group" style="display:inline-block;min-width: 58%;">
                      <input type="text" class="form-control" name="mobile1" OnlyNumber="true" maxlength="10" (blur)="getinfowithMobile()"
                        [(ngModel)]="cust_details.mobile" required #mobile1="ngModel" pattern="^[0-9]{10}$">
                      <label class="form-control-placeholder" for="mobile1">Mobile Number*</label>
                    </div>
                    <div style="display:inline-block;margin:3%">
                      <button type="button" (click)="show1=!show1" class="addnumber">
                        <i class="fa" [ngClass]="{'fa-plus': !show1, 'fa-minus': show1}" style="color:#ffa100"
                          aria-hidden="true"></i>
                      </button>
                    </div>
                    <div class="form-control-feedback" *ngIf="mobile1.errors && (mobile1.dirty || mobile1.touched)">
                      <p *ngIf="mobile1.errors.required" class="haserror">mobile is required</p>
                      <p *ngIf="!mobile1.errors.valid" class="haserror">mobile must contain digits only</p>
                    </div>
                  </div>
                </div>
                <div *ngIf="show1">
                  <div class="row">
                    <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                      <div class="form-group" style="display:inline-block;max-width: 16%;">
                        <label for="countrycode" style="font-size: 12px;padding-left: 2%;margin-bottom: 0px;">Country
                          Code</label>
                        <input type="text" class="form-control" name="countrycode" OnlyNumber="true" [readonly]="true"
                          value="+91" [(ngModel)]="countrycode1" #countrycode="ngModel" pattern="^[0-9]{10}$">
                      </div>
                      <div class="form-group " style="display:inline-block;min-width: 58%;">
                        <input type="text" class="form-control" name="mobile2" OnlyNumber="true" maxlength="10"
                          [(ngModel)]="cust_details.mobile2" #mobile2="ngModel" pattern="^[0-9]{10}$">
                        <label class="form-control-placeholder" for="mobile2">Mobile Number*</label>
                      </div>
                      <div class="form-control-feedback" *ngIf="mobile2.errors && (mobile2.dirty || mobile2.touched)">
                        <p *ngIf="!mobile2.errors.valid">mobile must contain digits only</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-8 col-lg-8 col-sm-8 col-xs-8">
                  <div class="form-group" style="display:inline-block;min-width:15%;">
                    <select id="salutation1" class="form-control" name="salutation1" [(ngModel)]="user.salutation"
                      #salutation1="ngModel" required>
                      <option *ngFor="let s of salutation" [value]="s.type"> {{s.type}}</option>
                    </select>
                  </div>
                  <div class="form-group CusName">
                    <input type="text" id="Cus_name" class="form-control" required [(ngModel)]="cust_details.first_name"
                      name="Cus_name" #Cus_name="ngModel" style="text-transform: capitalize;" pattern="^[ A-Za-z0-9_@./#&+-;%]*$">
                    <label class="form-control-placeholder" for="Cus_name">Customer Name*</label>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-control-feedback" *ngIf="Cus_name.errors && (Cus_name.dirty || Cus_name.touched)">
                    <p *ngIf="Cus_name.errors.required" class="haserror">Customer Name is required</p>

                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <input type="text" id="email" class="form-control" name="email" [(ngModel)]="cust_details.email"
                      #email="ngModel" required pattern="^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$" style="text-transform: lowercase;">
                    <label class="form-control-placeholder" for="email">Email Id*</label>
                  </div>
                </div>
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-control-feedback" *ngIf="email.errors && (email.dirty || email.touched)">
                    <p *ngIf="email.errors.required" class="haserror">Email is required</p>
                    <p *ngIf="!email.errors.valid" class="haserror">Email must contain at least the @ character</p>
                  </div>
                </div>
              </div>
              <span class="sectionHeader" style="padding-bottom: 2%;">Breakdown Location Details</span>
              <div class="row" style="padding-top: 2%;">
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="pickup-map">
                    <agm-map id="pickUpMap" [zoom]="zoom" [latitude]="latPickup" [longitude]="lngPickup" [disableDefaultUI]=false
                    (mapReady)=pickUpMapReady($event,6) (mapClick)="mapClk($event)" (centerChange)="centerChang($event)" 
                      (dragEnd)="mapDragEnd($event)">
                      <agm-marker [latitude]="latPickup" [longitude]="lngPickup" 
                      [iconUrl] = "iconurl"
                      [markerDraggable]=true 
                      (markerClick)="updateLocClk($events)" 
                      (dragEnd)="markerDragEndd($event,6)"></agm-marker>
                    </agm-map>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control noPlaceholder" name="Custodysearchplace" id="Custodysearchplace" #Custodysearchplace autocomplete="off" spellcheck="off"
                      type="text" (onSelect)="setAddress($event,'pickup')" google-place required/>
                    <label class="form-control-placeholder" for="city">Search Places*</label>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control" name="Custodyflatno" #Custodyflatno="ngModel" required autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.Custodyflatno" pattern="^[0-9a-zA-Z#,\-/_ .@]+$" minlength="1" maxlength="10"/>
                    <label class="form-control-placeholder" for="Custodyflatno">Flat No./House No.*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="Custodyflatno.errors && (Custodyflatno.dirty || Custodyflatno.touched)">
                      <p *ngIf="Custodyflatno.errors.required" class="haserror">Flat No./House No is required</p>
                      <p *ngIf="!Custodyflatno.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="Custodyflatno.errors.minlength" class="haserror">Minimum 1 characters</p>
                    </div>
                </div>
              </div>
              <div class="row">
                  <div class="col-lg-6 col-sm-6 col-md-6">
                      <div class="form-group" >
                        <input class="form-control" name="Custodybuildingname" #Custodybuildingname="ngModel" required autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.Custodybuildingname" pattern="^[0-9a-zA-Z#,\-/_ .@]+$" minlength="4" maxlength="100"/>
                        <label class="form-control-placeholder" for="Custodybuildingname">Building name/Street name*</label>
                      </div>
                      <div class="form-control-feedback" *ngIf="Custodybuildingname.errors && (Custodybuildingname.dirty || Custodybuildingname.touched)">
                          <p *ngIf="Custodybuildingname.errors.required" class="haserror">Building name/Street name is required</p>
                          <p *ngIf="!Custodybuildingname.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                          <p *ngIf="Custodybuildingname.errors.minlength" class="haserror">Minimum 4 characters</p>
                        </div>
                    </div>
                <div class="col-lg-6 col-sm-6 col-md-6">
                  <div class="form-group">
                    <input class="form-control" name="CustodysearchplaceLandmark" id="CustodysearchplaceLandmark"  #CustodysearchplaceLandmark="ngModel"
                      autocomplete="off" spellcheck="off" type="text" [(ngModel)]="user.Landmarkcust" pattern="^[0-9a-zA-Z#,\-/_ .@]+$" required minlength="4" maxlength="100"/>
                    <label class="form-control-placeholder" for="CustodysearchplaceLandmark">Landmark*</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="CustodysearchplaceLandmark.errors && (CustodysearchplaceLandmark.dirty || CustodysearchplaceLandmark.touched)">
                      <p *ngIf="CustodysearchplaceLandmark.errors.required" class="haserror">Landmark is required</p>
                      <p *ngIf="!CustodysearchplaceLandmark.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                      <p *ngIf="CustodysearchplaceLandmark.errors.minlength" class="haserror">Minimum 4 characters</p>
                    </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6">
                  <div class="form-group">
                    <select id="city" class="form-control" name="city" [(ngModel)]="user.city" #city="ngModel" required>
                      <option *ngFor="let city of CityList" [value]="city.cityid"> {{city.cityname}}</option>
                    </select>
                    <label class="form-control-placeholder" for="city">City*</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6 col-lg-6 col-sm-6">
                  <div class="form-group">
                    <input type="text" id="notes" class="form-control" name="notes" [(ngModel)]="user.notes" #notes="ngModel"
                    pattern="^[0-9a-zA-Z#,\-/_ .@]+$">
                    <label class="form-control-placeholder" for="notes">Notes</label>
                  </div>
                  <div class="form-control-feedback" *ngIf="notes.errors && (notes.dirty || notes.touched)">
                    <p *ngIf="!notes.errors.valid" class="haserror">\$^*'}'`;> these characters are not accepted</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12 col-lg-12 col-sm-12">
                <div style="float:right">
                  <button type="submit" class="btn btn-primary">Schedule</button>
                </div>
              </div>
            </div>
          </div>
        </form>
      </nb-card-body>
      <nb-card-footer>
      </nb-card-footer>
    </nb-card>
  </div>
</div>
